---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Get roadmap content
const roadmapCollection = await getCollection('roadmap');
const roadmap = roadmapCollection[0]; // Should only be one roadmap
const { Content } = await roadmap.render();

const baseUrl = import.meta.env.BASE_URL;
---

<BaseLayout title="Bug Bounty Roadmap" description="12-week comprehensive roadmap for bug bounty hunting journey">
  <div class="container-custom py-12">
    <!-- Back Link -->
    <div class="mb-8">
      <a href={`${baseUrl}/logs/`} class="text-soft-indigo hover:text-sage transition text-sm font-medium inline-flex items-center">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Timeline
      </a>
    </div>

    <!-- Header -->
    <div class="mb-12">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        <span class="text-gradient">Bug Bounty Roadmap</span>
      </h1>
      <p class="text-xl text-slate-300 max-w-3xl">
        12-week comprehensive strategy with quarterly milestones, checkpoints, and progression framework.
      </p>
    </div>

    <!-- Markdown Content -->
    <div class="max-w-4xl mx-auto prose prose-invert">
      <Content />
    </div>

    <!-- Quick Links -->
    <div class="mt-16 pt-8 border-t border-slate-700">
      <h2 class="text-2xl font-bold mb-6">Quick Links to Quarters</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <a href={`${baseUrl}/quarters/q1/`} class="card hover:border-soft-indigo/50 transition-colors">
          <div class="text-2xl font-bold text-soft-indigo mb-2">Q1</div>
          <div class="text-sm text-slate-400">Foundation Phase</div>
          <div class="text-xs text-slate-500 mt-2">Weeks 12-9</div>
        </a>
        <a href={`${baseUrl}/quarters/q2/`} class="card hover:border-sage/50 transition-colors">
          <div class="text-2xl font-bold text-sage mb-2">Q2</div>
          <div class="text-sm text-slate-400">Execution Phase</div>
          <div class="text-xs text-slate-500 mt-2">Weeks 8-5</div>
        </a>
        <a href={`${baseUrl}/quarters/q3/`} class="card hover:border-soft-indigo/50 transition-colors">
          <div class="text-2xl font-bold text-soft-indigo mb-2">Q3</div>
          <div class="text-sm text-slate-400">Specialization Phase</div>
          <div class="text-xs text-slate-500 mt-2">Weeks 4-1</div>
        </a>
        <a href={`${baseUrl}/quarters/q4/`} class="card hover:border-sage/50 transition-colors">
          <div class="text-2xl font-bold text-sage mb-2">Q4</div>
          <div class="text-sm text-slate-400">Mastery Phase</div>
          <div class="text-xs text-slate-500 mt-2">Weeks 12-0</div>
        </a>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  /* Prose styles for markdown content */
  :global(.prose h2) {
    @apply text-3xl font-bold mt-8 mb-4 text-slate-50;
  }

  :global(.prose h3) {
    @apply text-2xl font-bold mt-6 mb-3 text-slate-100;
  }

  :global(.prose h4) {
    @apply text-lg font-semibold mt-4 mb-2 text-slate-200;
  }

  :global(.prose p) {
    @apply text-slate-300 mb-4 leading-relaxed;
  }

  :global(.prose ul),
  :global(.prose ol) {
    @apply mb-4 ml-6 space-y-2;
  }

  :global(.prose li) {
    @apply text-slate-300;
  }

  :global(.prose strong) {
    @apply text-slate-50 font-semibold;
  }

  :global(.prose code) {
    @apply bg-slate-800 px-2 py-1 rounded text-soft-indigo;
  }

  :global(.prose table) {
    @apply w-full border-collapse mb-6;
  }

  :global(.prose th) {
    @apply bg-slate-800 px-4 py-2 text-left font-semibold text-slate-50 border border-slate-700;
  }

  :global(.prose td) {
    @apply px-4 py-2 border border-slate-700 text-slate-300;
  }

  :global(.prose tr:hover) {
    @apply bg-slate-800/50;
  }

  :global(.prose hr) {
    @apply border-slate-700 my-6;
  }

  :global(.prose blockquote) {
    @apply border-l-4 border-soft-indigo pl-4 italic text-slate-400 my-4;
  }
</style>
